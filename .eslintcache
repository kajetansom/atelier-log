[{"/Users/kajetansom/Webdesign/React/atelier-log/src/index.js":"1","/Users/kajetansom/Webdesign/React/atelier-log/src/reportWebVitals.js":"2","/Users/kajetansom/Webdesign/React/atelier-log/src/App.js":"3","/Users/kajetansom/Webdesign/React/atelier-log/src/components/LogButton.jsx":"4","/Users/kajetansom/Webdesign/React/atelier-log/src/components/NameSelect.jsx":"5","/Users/kajetansom/Webdesign/React/atelier-log/src/components/UserTag.jsx":"6"},{"size":500,"mtime":1611592812644,"results":"7","hashOfConfig":"8"},{"size":362,"mtime":1611592812659,"results":"9","hashOfConfig":"8"},{"size":3338,"mtime":1611606960776,"results":"10","hashOfConfig":"8"},{"size":402,"mtime":1611606073073,"results":"11","hashOfConfig":"8"},{"size":900,"mtime":1611607278750,"results":"12","hashOfConfig":"8"},{"size":398,"mtime":1611606628309,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"jp5uik",{"filePath":"17","messages":"18","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"19","messages":"20","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"21","usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"/Users/kajetansom/Webdesign/React/atelier-log/src/index.js",[],["28","29"],"/Users/kajetansom/Webdesign/React/atelier-log/src/reportWebVitals.js",[],"/Users/kajetansom/Webdesign/React/atelier-log/src/App.js",["30"],"import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport LogButton from './components/LogButton.jsx';\nimport NameSelect from './components/NameSelect.jsx';\nimport UserTag from './components/UserTag.jsx';\n\nconst App = () => {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [name, setName] = useState(\"Anna 1\");\n  const [loggedUsers, setLoggedUsers] = useState([]);\n\n  console.log(loggedUsers);\n\n  useEffect(() => {\n    getUsersDatabase();\n    const storageName = localStorage.getItem('name');\n    const storageLoggedIn = localStorage.getItem('loggedIn');\n    if(storageName !== \"\" || storageName !== null) {\n      console.log(\"name in storage: \"+storageName)\n      setName(storageName);\n    }\n    if(storageLoggedIn) {\n      console.log(\"storage loged in \")\n      setLoggedIn(true);\n    }\n  }, []);\n\n  const changeLog = () => {\n    if(name !== null) {\n      localStorage.setItem('name', name);\n      checkUserDatabase(name)\n    }\n    setLoggedIn(!loggedIn);\n  }\n\n  const loginDatabase = (user) => {\n    axios.post(`https://atelier-log-default-rtdb.europe-west1.firebasedatabase.app/users/${user}.json`, Date.now())\n        .then(response => {\n          let newLoggedUsers = loggedUsers.concat(user)\n          setLoggedUsers(newLoggedUsers);\n          console.log(user + \" user logged in\")\n        });\n        localStorage.setItem('loggedIn', 'true');\n  }\n\n  const logOutDatabase = (user) => {\n    axios.delete(`https://atelier-log-default-rtdb.europe-west1.firebasedatabase.app/users/${user}.json`)\n        .then(response => {\n          console.log(user + \" user logged in\")\n        });\n    console.log(user + \" user logged out\")\n    localStorage.removeItem('loggedIn');\n    let newLoggedUsers = loggedUsers.filter(u => u !== user)\n    setLoggedUsers(newLoggedUsers);\n    console.log(newLoggedUsers)\n  }\n\n  const getUsersDatabase = () => {\n    axios.get('https://atelier-log-default-rtdb.europe-west1.firebasedatabase.app/users.json')\n      .then(response => {\n        if(Object.keys(response.data).length > 0) {\n          const allLoggedUsers = [];\n          Object.keys(response.data).map(loggedUser => {\n            allLoggedUsers.push(loggedUser)\n          })\n          setLoggedUsers(allLoggedUsers)\n        }\n      })\n      .catch(err=> {\n        console.log(err);\n    });\n  }\n\n  setInterval(()=> {\n    getUsersDatabase()\n  }, 20000)\n\n  const checkUserDatabase = (user) => {\n    axios.get(`https://atelier-log-default-rtdb.europe-west1.firebasedatabase.app/users/${user}.json`)\n        .then(response => {\n          console.log(response)\n          if(response.data) {\n            logOutDatabase(user);\n          } else {\n            loginDatabase(user);\n          }\n        })\n        .catch(err=> {\n          console.log(err);\n      });\n  }\n\n  const changeName = (event) => {\n    setName(event.target.value)\n    console.log(name)\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>Atelier Auslastung</h1>\n      <div style={{\"marginBottom\": \"10px\"}}>\n        <NameSelect usersIn={loggedUsers} logged={loggedIn} selectedName={name} onChangeName={changeName} />\n        <LogButton logged={loggedIn} changeLog={changeLog} />\n      </div>\n      {loggedUsers.map((user, i) => {\n        return <UserTag key={i} userName={user} />\n      })}\n    </div>\n  );\n}\n\nexport default App;\n","/Users/kajetansom/Webdesign/React/atelier-log/src/components/LogButton.jsx",[],"/Users/kajetansom/Webdesign/React/atelier-log/src/components/NameSelect.jsx",[],"/Users/kajetansom/Webdesign/React/atelier-log/src/components/UserTag.jsx",[],{"ruleId":"31","replacedBy":"32"},{"ruleId":"33","replacedBy":"34"},{"ruleId":"35","severity":1,"message":"36","line":64,"column":53,"nodeType":"37","messageId":"38","endLine":64,"endColumn":55},"no-native-reassign",["39"],"no-negated-in-lhs",["40"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","no-global-assign","no-unsafe-negation"]